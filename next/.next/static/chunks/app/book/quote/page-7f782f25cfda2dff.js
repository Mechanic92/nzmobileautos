(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4893],{3731:(e,s,r)=>{Promise.resolve().then(r.bind(r,9079))},9079:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>u});var t=r(3827),l=r(7507),i=r(8322),a=r(8003),d=r(8579);function o(){for(var e=arguments.length,s=Array(e),r=0;r<e;r++)s[r]=arguments[r];return s.filter(Boolean).join(" ")}var c=r(2966);let n=a.k5(["BRAKES","WOF_REPAIRS","SERVICING","OTHER"]),m=a.k5(["TODAY","THIS_WEEK","FLEXIBLE"]),h=a.Ik({category:n,urgency:m,address:a.Yj().min(5),vehiclePlate:a.Yj().min(2),vehicleMake:a.Yj().optional(),vehicleModel:a.Yj().optional(),vehicleYear:a.au.number().int().min(1900).max(2100).optional(),description:a.Yj().min(10),symptoms:a.YO(a.Yj()).default([]),customerName:a.Yj().min(2),customerEmail:a.Yj().email().optional().or(a.eu("")),customerPhone:a.Yj().min(6)}),x=["Brake noise / grinding","Vibration when braking","Soft brake pedal","Warning light (ABS)","Overheating","Oil / fluid leak","Car won’t start","Battery keeps going flat","Rough idle / misfire","Loss of power","Suspension noise","WOF failed / needs repairs"];function u(){let[e,s]=(0,l.useState)(!1),[r,a]=(0,l.useState)(null),n=(0,c.useSearchParams)(),m=(n.get("service")||"").trim(),u=(n.get("symptom")||"").trim(),b={category:"BRAKES",urgency:"THIS_WEEK",address:"",vehiclePlate:"",vehicleMake:"",vehicleModel:"",vehicleYear:void 0,description:"",symptoms:[],customerName:"",customerEmail:"",customerPhone:""},p=(0,i.mN)({resolver:(0,d.u)(h),defaultValues:b});(0,l.useEffect)(()=>{if(!m&&!u)return;let e=m.toLowerCase(),s=e.includes("brake")?"BRAKES":e.includes("wof")?"WOF_REPAIRS":e.includes("service")?"SERVICING":"OTHER";if(p.setValue("category",s,{shouldDirty:!0}),u){let e=p.getValues("symptoms")||[];e.includes(u)||p.setValue("symptoms",[...e,u],{shouldDirty:!0})}if(!(p.getValues("description")||"").trim()){let e=[];m&&e.push("Service requested: ".concat(m)),u&&e.push("Symptom: ".concat(u)),p.setValue("description",e.join("\n"),{shouldDirty:!0})}},[p,m,u]);let g=p.watch("category"),j=(0,l.useMemo)(()=>"BRAKES"===g?"For brakes, photos help a lot (pads/rotors/calipers).":"WOF_REPAIRS"===g?"If you have a fail sheet, add the details in the description.":"SERVICING"===g?"Tell us what service you want (basic/standard/comprehensive) and any issues.":"Describe the issue and we’ll confirm scope before quoting.",[g]),w=async e=>{s(!0),a(null);try{let s=await fetch("/api/quotes/create",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({...e,customerEmail:(e.customerEmail||"").trim()||null})});if(!s.ok){let e=await s.text();throw Error(e||"Failed to submit quote request")}let r=await s.json();a(r)}catch(e){alert((null==e?void 0:e.message)||"Failed to submit quote request")}finally{s(!1)}};return(0,t.jsx)("div",{className:"container py-10",children:(0,t.jsxs)("div",{className:"grid gap-8 lg:grid-cols-[1fr_360px] lg:items-start",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-semibold tracking-tight",children:"Request a quote"}),(0,t.jsx)("p",{className:"mt-2 text-white/70 max-w-2xl",children:"Brakes, WOF repairs, servicing, and other work usually needs a quick assessment. Submit details here and we’ll confirm scope and pricing before any major work."})]}),(0,t.jsxs)("div",{className:"hidden lg:block text-xs text-white/60",children:["Fast response during business hours",(0,t.jsx)("div",{className:"mt-1",children:"Auckland mobile mechanic"})]})]}),(0,t.jsxs)("form",{onSubmit:p.handleSubmit(w),className:"mt-8 grid gap-5",children:[(0,t.jsxs)("section",{className:"rounded-2xl border border-white/10 bg-white/5 p-5",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,t.jsx)("h2",{className:"font-semibold",children:"1) What do you need?"}),(0,t.jsx)("div",{className:"text-xs text-white/60",children:"No obligation"})]}),(0,t.jsx)("div",{className:"mt-4 grid gap-4",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-white/70",children:"Category"}),(0,t.jsxs)("select",{className:o("mt-1 w-full px-3 py-2.5 rounded-lg bg-black/40 border border-white/10 focus:border-brand-yellow/60"),...p.register("category"),defaultValue:b.category,children:[(0,t.jsx)("option",{value:"BRAKES",children:"Brakes"}),(0,t.jsx)("option",{value:"WOF_REPAIRS",children:"WOF repairs"}),(0,t.jsx)("option",{value:"SERVICING",children:"Servicing"}),(0,t.jsx)("option",{value:"OTHER",children:"Other"})]}),(0,t.jsx)("div",{className:"mt-2 text-xs text-white/60",children:j})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-white/70",children:"Urgency"}),(0,t.jsxs)("select",{className:o("mt-1 w-full px-3 py-2.5 rounded-lg bg-black/40 border border-white/10 focus:border-brand-yellow/60"),...p.register("urgency"),defaultValue:b.urgency,children:[(0,t.jsx)("option",{value:"TODAY",children:"Today"}),(0,t.jsx)("option",{value:"THIS_WEEK",children:"This week"}),(0,t.jsx)("option",{value:"FLEXIBLE",children:"Flexible"})]})]})]})})]}),(0,t.jsxs)("section",{className:"rounded-2xl border border-white/10 bg-white/5 p-5",children:[(0,t.jsx)("h2",{className:"font-semibold",children:"2) Location"}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("label",{className:"text-sm text-white/70",children:"Address"}),(0,t.jsx)("input",{className:o("mt-1 w-full px-3 py-2.5 rounded-lg bg-black/40 border border-white/10",p.formState.errors.address?"border-red-500/60":"focus:border-brand-yellow/60"),placeholder:"Street, suburb, city",...p.register("address")}),p.formState.errors.address&&(0,t.jsx)("div",{className:"mt-1 text-xs text-red-300",children:"Please enter the service address."})]})]}),(0,t.jsxs)("section",{className:"rounded-2xl border border-white/10 bg-white/5 p-5",children:[(0,t.jsx)("h2",{className:"font-semibold",children:"3) Vehicle"}),(0,t.jsxs)("div",{className:"mt-4 grid gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-white/70",children:"Rego / Plate"}),(0,t.jsx)("input",{className:o("mt-1 w-full px-3 py-2.5 rounded-lg bg-black/40 border border-white/10 uppercase tracking-wide",p.formState.errors.vehiclePlate?"border-red-500/60":"focus:border-brand-yellow/60"),placeholder:"ABC123",...p.register("vehiclePlate")}),p.formState.errors.vehiclePlate&&(0,t.jsx)("div",{className:"mt-1 text-xs text-red-300",children:"Please enter a plate number."})]}),(0,t.jsxs)("details",{className:"rounded-lg border border-white/10 bg-black/30 px-3 py-3",children:[(0,t.jsx)("summary",{className:"cursor-pointer text-sm text-white/80",children:"Optional vehicle details (helps us quote)"}),(0,t.jsxs)("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-white/70",children:"Make"}),(0,t.jsx)("input",{className:"mt-1 w-full px-3 py-2.5 rounded-lg bg-black/40 border border-white/10 focus:border-brand-yellow/60",...p.register("vehicleMake")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-white/70",children:"Model"}),(0,t.jsx)("input",{className:"mt-1 w-full px-3 py-2.5 rounded-lg bg-black/40 border border-white/10 focus:border-brand-yellow/60",...p.register("vehicleModel")})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-white/70",children:"Year"}),(0,t.jsx)("input",{className:"mt-1 w-full px-3 py-2.5 rounded-lg bg-black/40 border border-white/10 focus:border-brand-yellow/60",type:"number",...p.register("vehicleYear")})]})]})]})]})]}),(0,t.jsxs)("section",{className:"rounded-2xl border border-white/10 bg-white/5 p-5",children:[(0,t.jsx)("h2",{className:"font-semibold",children:"4) Symptoms"}),(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:x.map(e=>{let s=p.watch("symptoms"),r=null==s?void 0:s.includes(e);return(0,t.jsxs)("label",{className:"flex items-start gap-3 rounded-lg border border-white/10 bg-black/30 px-3 py-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:!!r,onChange:s=>{let r=p.getValues("symptoms")||[];s.target.checked?p.setValue("symptoms",Array.from(new Set([...r,e]))):p.setValue("symptoms",r.filter(s=>s!==e))}}),(0,t.jsx)("span",{className:"text-sm text-white/80",children:e})]},e)})})})]}),(0,t.jsxs)("section",{className:"rounded-2xl border border-white/10 bg-white/5 p-5",children:[(0,t.jsx)("h2",{className:"font-semibold",children:"5) Details"}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("label",{className:"text-sm text-white/70",children:"Describe the problem"}),(0,t.jsx)("textarea",{className:o("mt-1 w-full px-3 py-2.5 rounded-lg bg-black/40 border border-white/10 min-h-28",p.formState.errors.description?"border-red-500/60":"focus:border-brand-yellow/60"),placeholder:"What’s happening, when it occurs, any recent repairs, and what you’ve already tried.",...p.register("description")}),p.formState.errors.description&&(0,t.jsx)("div",{className:"mt-1 text-xs text-red-300",children:"Please add a little more detail."}),(0,t.jsx)("div",{className:"mt-2 text-xs text-white/60",children:"Photo upload is next (R2 signed uploads). For now, you can still submit and we’ll request photos by SMS."})]})]}),(0,t.jsxs)("section",{className:"rounded-2xl border border-white/10 bg-white/5 p-5",children:[(0,t.jsx)("h2",{className:"font-semibold",children:"6) Contact details"}),(0,t.jsxs)("div",{className:"mt-4 grid gap-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-white/70",children:"Name"}),(0,t.jsx)("input",{className:o("mt-1 w-full px-3 py-2.5 rounded-lg bg-black/40 border border-white/10",p.formState.errors.customerName?"border-red-500/60":"focus:border-brand-yellow/60"),...p.register("customerName")}),p.formState.errors.customerName&&(0,t.jsx)("div",{className:"mt-1 text-xs text-red-300",children:"Please enter your name."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-white/70",children:"Phone"}),(0,t.jsx)("input",{className:o("mt-1 w-full px-3 py-2.5 rounded-lg bg-black/40 border border-white/10",p.formState.errors.customerPhone?"border-red-500/60":"focus:border-brand-yellow/60"),placeholder:"e.g. 027 123 4567",...p.register("customerPhone")}),p.formState.errors.customerPhone&&(0,t.jsx)("div",{className:"mt-1 text-xs text-red-300",children:"Please enter a phone number."})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"text-sm text-white/70",children:"Email (optional)"}),(0,t.jsx)("input",{className:o("mt-1 w-full px-3 py-2.5 rounded-lg bg-black/40 border border-white/10",p.formState.errors.customerEmail?"border-red-500/60":"focus:border-brand-yellow/60"),placeholder:"you@example.com",...p.register("customerEmail")}),p.formState.errors.customerEmail&&(0,t.jsx)("div",{className:"mt-1 text-xs text-red-300",children:"Please enter a valid email address."})]})]})]}),!r&&(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 sm:items-center sm:justify-between",children:[(0,t.jsx)("div",{className:"text-sm text-white/60",children:"By submitting, you consent to being contacted about your request."}),(0,t.jsx)("button",{type:"submit",disabled:e,className:"px-5 py-3 rounded-lg bg-brand-yellow text-black font-semibold disabled:opacity-60",children:e?"Submitting…":"Submit quote request"})]}),r&&(0,t.jsxs)("div",{className:"rounded-xl border border-green-500/20 bg-green-500/10 p-5",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"inline-flex items-center justify-center h-10 w-10 rounded-full bg-green-500/20",children:(0,t.jsx)("svg",{className:"h-5 w-5 text-green-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-white font-semibold",children:"Quote request received"}),(0,t.jsxs)("div",{className:"text-sm text-white/70",children:["Reference: ",r.publicId]})]})]}),(0,t.jsx)("div",{className:"mt-4 text-sm text-white/70",children:"We'll review your request and get back to you shortly with scope and next steps."}),(0,t.jsxs)("div",{className:"mt-4 flex flex-wrap gap-3",children:[(0,t.jsx)("a",{className:"inline-flex px-4 py-2 rounded-lg bg-brand-yellow text-black font-semibold no-underline",href:"/",children:"Back to home"}),(0,t.jsx)("a",{className:"inline-flex px-4 py-2 rounded-lg border border-white/15 text-white no-underline hover:bg-white/5",href:"/book/diagnostics",children:"Book diagnostics instead"})]})]})]})]}),(0,t.jsxs)("aside",{className:"rounded-2xl border border-white/10 bg-white/5 p-5 lg:sticky lg:top-24",children:[(0,t.jsx)("div",{className:"text-sm text-white/70",children:"How quoting works"}),(0,t.jsxs)("div",{className:"mt-3 rounded-xl border border-white/10 bg-black/40 p-4 text-sm text-white/70",children:[(0,t.jsx)("div",{className:"text-white font-semibold",children:"We quote after assessment"}),(0,t.jsx)("div",{className:"mt-2",children:"For mobile work, parts and labour vary by vehicle. We’ll confirm the scope and give a clear quote before any major repairs."}),(0,t.jsx)("div",{className:"mt-3 text-xs text-white/60",children:"Tip: If the vehicle is unsafe to drive, tell us in the description."})]})]})]})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[3322,1241,4211,7358],()=>s(3731)),_N_E=e.O()}]);