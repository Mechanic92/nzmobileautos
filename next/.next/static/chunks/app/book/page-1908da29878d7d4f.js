(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9774],{5233:(e,t,a)=>{Promise.resolve().then(a.bind(a,9125))},9125:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>f});var s=a(3827),l=a(7507),n=a(2966),i=a(4119),r=a(1880),c=a(2574);function o(e){let{className:t,classNames:a,showOutsideDays:l=!0,...n}=e;return(0,s.jsx)(c.h,{showOutsideDays:l,className:t,classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100",nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-white/40 rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative focus-within:relative focus-within:z-20",day:"h-9 w-9 p-0 font-normal aria-selected:opacity-100 hover:bg-white/10 rounded-lg transition-colors",day_selected:"bg-brand-yellow text-black font-bold hover:bg-brand-yellow hover:text-black focus:bg-brand-yellow focus:text-black",day_today:"bg-white/5 text-white",day_outside:"text-white/20 opacity-50",day_disabled:"text-white/10 opacity-50 pointer-events-none",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...a},components:{IconLeft:e=>{let{...t}=e;return(0,s.jsx)(i.A,{className:"h-4 w-4"})},IconRight:e=>{let{...t}=e;return(0,s.jsx)(r.A,{className:"h-4 w-4"})}},...n})}o.displayName="Calendar";var d=a(2272),x=a(9329),h=a(1786),m=a(6974),b=a(1502),u=a(6300),p=a(9814);function f(){var e;let t=(0,n.useSearchParams)(),a=(0,n.useRouter)(),[i,r]=(0,l.useState)(t.get("id")),[c,f]=(0,l.useState)(null),[g,y]=(0,l.useState)((0,d.f)(new Date,1)),[v,j]=(0,l.useState)([]),[N,k]=(0,l.useState)(null),[S,_]=(0,l.useState)(!1),[A,E]=(0,l.useState)({line1:"",suburb:""}),[P,C]=(0,l.useState)({name:"",email:"",phone:""}),[D,G]=(0,l.useState)(!1);(0,l.useEffect)(()=>{i&&fetch("/api/quote/".concat(i)).then(e=>e.json()).then(e=>{f(e),e.customer&&C({name:"Lead from Quote"===e.customer.fullName?"":e.customer.fullName,email:e.customer.email||"",phone:e.customer.phone||""})}).catch(e=>console.error("Failed to load quote"))},[i]),(0,l.useEffect)(()=>{g&&M(g)},[g]);let M=async e=>{_(!0);try{let t=await fetch("/api/availability?date=".concat((0,x.GP)(e,"yyyy-MM-dd"))),a=await t.json();j(a.slots||[])}catch(e){console.error("Failed to fetch slots")}finally{_(!1)}},O=async e=>{if(e.preventDefault(),N&&i){G(!0);try{let e=await fetch("/api/stripe/session",{method:"POST",body:JSON.stringify({quoteId:i,startTime:N.start,customer:{...P,...A}})}),t=await e.json();t.url?window.location.href=t.url:alert(t.error||"Booking failed")}catch(e){alert("Something went wrong")}finally{G(!1)}}};if(!i)return(0,s.jsxs)("div",{className:"container py-24 text-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Start with a Quote"}),(0,s.jsx)("p",{className:"mt-4",children:"Please get a quote first to see pricing and book."}),(0,s.jsx)("button",{onClick:()=>a.push("/instant-quote"),className:"mt-6 px-6 py-3 bg-brand-yellow text-black font-bold rounded-lg",children:"Get Instant Quote"})]});let F=null==c?void 0:null===(e=c.pricingSnapshotJson)||void 0===e?void 0:e.total;return(0,s.jsx)("div",{className:"min-h-screen bg-black text-white pb-24",children:(0,s.jsx)("div",{className:"container max-w-6xl py-12",children:(0,s.jsxs)("div",{className:"grid lg:grid-cols-2 gap-12",children:[(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h1",{className:"text-4xl font-black italic uppercase tracking-tighter",children:"Choose Your Slot"}),(0,s.jsx)("p",{className:"text-white/50",children:"Mon-Fri availability. Select a date below to see available times."})]}),(0,s.jsx)("div",{className:"p-4 bg-white/5 border border-white/10 rounded-2xl flex justify-center",children:(0,s.jsx)(o,{mode:"single",selected:g,onSelect:y,disabled:e=>e<(0,h.R)()||0===e.getDay()||6===e.getDay(),className:"rounded-md border-none"})}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-xs font-bold uppercase tracking-widest text-white/40",children:[(0,s.jsx)(m.A,{size:14})," Available Start Times"]}),S?(0,s.jsx)("div",{className:"flex items-center justify-center p-12",children:(0,s.jsx)(b.A,{className:"animate-spin text-brand-yellow"})}):(0,s.jsxs)("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-2",children:[v.map((e,t)=>(0,s.jsx)("button",{disabled:!e.available,onClick:()=>k(e),className:"py-3 rounded-lg text-sm font-bold border transition-all ".concat((null==N?void 0:N.start)===e.start?"bg-brand-yellow border-brand-yellow text-black shadow-[0_0_15px_rgba(255,200,0,0.3)]":e.available?"bg-white/5 border-white/10 hover:border-white/30 text-white":"bg-white/2 border-transparent text-white/10 cursor-not-allowed"),children:(0,x.GP)(new Date(e.start),"h:mm aa")},t)),0===v.length&&(0,s.jsx)("div",{className:"col-span-full py-12 text-center text-white/30 italic",children:"No slots available for this date."})]})]})]}),(0,s.jsx)("div",{className:"space-y-8",children:(0,s.jsxs)("form",{onSubmit:O,className:"bg-white/5 border border-white/10 rounded-2xl p-8 space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-xs font-bold uppercase tracking-widest text-brand-yellow",children:[(0,s.jsx)(u.A,{size:14})," Secure Booking"]}),(0,s.jsx)("h2",{className:"text-xl font-bold",children:"Service Details"})]}),(0,s.jsxs)("div",{className:"grid gap-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsx)(w,{label:"Full Name",placeholder:"John Doe",value:P.name,onChange:e=>C({...P,name:e})}),(0,s.jsx)(w,{label:"Phone Number",placeholder:"027...",value:P.phone,onChange:e=>C({...P,phone:e})})]}),(0,s.jsx)(w,{label:"Email Address",type:"email",placeholder:"john@example.com",value:P.email,onChange:e=>C({...P,email:e})}),(0,s.jsx)(w,{label:"Street Address",placeholder:"123 Example Street",value:A.line1,onChange:e=>E({...A,line1:e})}),(0,s.jsx)(w,{label:"Suburb",placeholder:"Ponsonby",value:A.suburb,onChange:e=>E({...A,suburb:e})})]}),N&&(0,s.jsxs)("div",{className:"p-6 bg-brand-yellow/10 border border-brand-yellow/20 rounded-xl space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-end border-b border-brand-yellow/20 pb-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-[10px] font-bold uppercase tracking-widest text-brand-yellow",children:"Selected Appointment"}),(0,s.jsx)("div",{className:"text-lg font-black",children:(0,x.GP)(new Date(N.start),"EEEE, d MMMM")}),(0,s.jsxs)("div",{className:"text-sm font-bold text-white/70",children:[(0,x.GP)(new Date(N.start),"h:mm aa")," - ",(0,x.GP)(new Date(N.end),"h:mm aa")]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("div",{className:"text-[10px] font-bold uppercase text-white/40",children:"Hold Active"}),(0,s.jsx)("div",{className:"text-xs font-mono",children:"15m during checkout"})]})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center text-lg font-black",children:[(0,s.jsx)("span",{className:"uppercase tracking-tighter",children:"Total Due Now"}),(0,s.jsxs)("span",{className:"text-brand-yellow",children:["$",F||"..."]})]})]}),(0,s.jsx)("button",{type:"submit",disabled:D||!N,className:"w-full h-16 bg-brand-yellow text-black font-black rounded-xl hover:bg-white transition-all disabled:opacity-20 disabled:grayscale flex items-center justify-center gap-3 overflow-hidden relative group",children:D?(0,s.jsx)(b.A,{className:"animate-spin"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)("span",{className:"text-lg",children:"SECURE PAYMENT"}),(0,s.jsx)("span",{className:"text-[10px] tracking-[0.2em] font-bold",children:"Powered by Stripe"})]}),(0,s.jsx)(p.A,{className:"group-hover:translate-x-1 transition-transform"})]})}),(0,s.jsxs)("div",{className:"flex items-center justify-center gap-4 pt-4 opacity-50 grayscale hover:grayscale-0 transition-all cursor-default",children:[(0,s.jsx)("span",{className:"text-[10px] font-black italic",children:"AFTERPAY AVAILABLE"}),(0,s.jsx)("div",{className:"h-4 w-px bg-white/20"}),(0,s.jsx)("span",{className:"text-[10px] font-black italic",children:"APPLE PAY"}),(0,s.jsx)("div",{className:"h-4 w-px bg-white/20"}),(0,s.jsx)("span",{className:"text-[10px] font-black italic",children:"GOOGLE PAY"})]})]})})]})})})}function w(e){let{label:t,value:a,onChange:l,placeholder:n,type:i="text"}=e;return(0,s.jsxs)("div",{className:"space-y-1.5",children:[(0,s.jsx)("label",{className:"text-[10px] uppercase tracking-widest text-white/40 font-bold",children:t}),(0,s.jsx)("input",{required:!0,type:i,className:"w-full h-11 bg-white/5 border border-white/10 rounded-lg px-4 text-sm text-white focus:border-brand-yellow focus:ring-1 focus:ring-brand-yellow outline-none",placeholder:n,value:a,onChange:e=>l(e.target.value)})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[6312,1241,4211,7358],()=>t(5233)),_N_E=e.O()}]);